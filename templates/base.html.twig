<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
    {% block stylesheets %}
        <style>
            body {
                font-family: 'Arial', sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                margin: 0;
                padding: 0;
                height: 100vh;
            }
            /* Контейнер формы — центрируется на странице, имеет белый фон с прозрачностью, скруглённые углы и тень */
            .container {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: rgba(255, 255, 255, 0.9);
                padding: 40px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                width: 400px;
            }
            /* Заголовок формы — по центру, тёмный цвет, отступ снизу */
            h1 {
                text-align: center;
                color: #333;
                margin-bottom: 30px;
            }
            /* Группа полей формы — вертикальный отступ между элементами */
            .form-group {
                margin-bottom: 20px;
            }
            /* Подписи к полям — блочное отображение, жирный шрифт, цвет серо-синий, отступ снизу */
            label {
                display: block;
                margin-bottom: 5px;
                color: #555;
                font-weight: bold;
            }
            /* Поля ввода (текст, email, пароль) — полная ширина, отступы, серая рамка, скругление, размер шрифта */
            input[type="text"],
            input[type="email"],
            input[type="password"] {
                width: 100%;
                padding: 10px;
                border: 1px solid #ddd;
                border-radius: 8px;
                box-sizing: border-box;
                font-size: 16px;
            }
            /* Кнопка отправки — полная ширина, фиолетовый фон, белый текст, скругление, курсор-указатель, плавная смена цвета */
            button {
                width: 100%;
                padding: 12px;
                background-color: #764ba2;
                border: none;
                border-radius: 8px;
                color: white;
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            /* Эффект наведения на кнопку — смена цвета на синий */
            button:hover {
                background-color: #667eea;
            }
            /* Ссылка «Уже есть аккаунт?» — по центру, фиолетовый цвет, без подчёркивания */
            .link {
                text-align: center;
                margin-top: 20px;
                color: #764ba2;
                text-decoration: none;
            }
            /* Эффект наведения на ссылку — подчёркивание */
            .link:hover {
                text-decoration: underline;
            }
            /* Сообщение об ошибке — красный цвет, маленький шрифт, скрыто по умолчанию */
            .error-message {
                color: red;
                font-size: 14px;
                margin-top: 5px;
                display: none; /* Скрыто по умолчанию*/
            }
        </style>
    {% endblock %}

</head>
<body>
<div class="container">
    <h1>Регистрация</h1>
    <form method="POST" action="/register">
        <!-- Группа поля «Имя пользователя» -->
        <div class="form-group">
            <label for="username">Имя пользователя:</label>
            <input type="text" id="username" name="username" required>
        </div>
        <!-- Группа поля «Email» -->
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <!-- Группа поля «Пароль» -->
        <div class="form-group">
            <label for="password">Пароль:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <!-- Группа поля «Подтвердите пароль» -->
        <div class="form-group">
            <label for="confirm-password">Подтвердите пароль:</label>
            <input type="password" id="confirm-password" name="confirm_password" required>
        </div>
        <!-- Кнопка отправки формы -->
        <button type="submit">Зарегистрироваться</button>
    </form>
    <!-- Ссылка на страницу входа -->
    <a class="link" href="/login">Уже есть аккаунт? Войти</a>
</div>
{% block javascripts %}
    <script>
        // Ждём, пока DOM будет полностью построен
        document.addEventListener('DOMContentLoaded', function() {
            // Получаем элементы формы
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirm-password');

            // Создаём элемент для сообщения об ошибке
            const errorMessage = document.createElement('span');
            errorMessage.className = 'error-message';
            errorMessage.textContent = 'Пароли не совпадают!';

            // Находим контейнер поля «Подтвердите пароль»
            const confirmPasswordGroup = document.querySelector('label[for="confirm-password"]').parentNode;
            // Добавляем сообщение об ошибке в контейнер
            confirmPasswordGroup.appendChild(errorMessage);

            // Функция проверки совпадения паролей
            function checkPasswordsMatch() {
                const password = passwordInput.value;
                const confirmPassword = confirmPasswordInput.value;

                if (password === confirmPassword && password !== '') {
                    errorMessage.style.display = 'none';
                    confirmPasswordInput.style.borderColor = '';
                } else {
                    errorMessage.style.display = 'inline';
                    confirmPasswordInput.style.borderColor = 'red';
                }
            }

            // Вешаем обработчики на ввод в оба поля
            passwordInput.addEventListener('input', checkPasswordsMatch);
            confirmPasswordInput.addEventListener('input', checkPasswordsMatch);

            // Блокируем отправку формы при несовпадении паролей
            document.querySelector('form').addEventListener('submit', function(event) {
                if (passwordInput.value !== confirmPasswordInput.value) {
                    event.preventDefault();
                    alert('Пароли не совпадают! Проверьте ввод.');
                }
            });
        });
    </script>
{% endblock %}
</body>
</html>
